<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./WEB-INF/templates/default.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="title">
        title
    </ui:define>

    <ui:define name="head">

    </ui:define>

    <ui:define name="content">
        <!--form-no-margin-->

        <h:form id="newSequenceForm" class="form-horizontal">
            <h:panelGrid columns="1" cellpadding="5">
                <h:panelGroup> 
                    <div class="form-group" id="titleClass">
                        <div class="modal-header">
                            <h2>Composez votre séquence didactique</h2>
                        </div>
                    </div>
                </h:panelGroup> 
                <h:panelGroup> 
                    <h:panelGrid columns="2" cellpadding="5" width="100%">
                        <h:panelGroup id="panelSeqName">
                            <p:outputLabel for="seqName" value="Nom" 
                                           style="font-weight:bold"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:inputText id="seqName" required="true" 
                                         value="#{sequenceBean.name}" 
                                         requiredMessage="Veuillez compléter le champ" />
                            <p:watermark for="seqName" 
                                         value="Donnez un nom à la séquence" />
                            <p:message id="seqNameMessage" for="seqName" /> 
                        </h:panelGroup>
                        <h:panelGroup>
                            <div class="modal-header">
                                <h3>Activité de repérage</h3>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup/>
                        <h:panelGroup>
                            <p:outputLabel for="seqNotion" value="Notion" />
                        </h:panelGroup>
                        <h:panelGroup id="notionPanel">
                            <p:selectOneMenu id="seqNotion" 
                                             value="#{sequenceBean.notion}" 
                                             onchange="submit()" 
                                             valueChangeListener="#{sequenceBean.changeSubNotions}">
                                <f:selectItems value="#{sequenceBean.notions}" />
                            </p:selectOneMenu>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel for="seqSubNotion" value="Sous-notion" />
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:selectOneMenu id="seqSubNotion" 
                                             value="#{sequenceBean.subNotion}">
                                <f:selectItems value="#{sequenceBean.subNotions}" />
                            </p:selectOneMenu>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel for="seqLevel" value="Niveau" />
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:selectOneMenu id="seqLevel" 
                                             value="#{sequenceBean.level}">
                                <f:selectItems value="#{sequenceBean.levels}" />
                            </p:selectOneMenu>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel for="seqSpottingText" 
                                           value="Texte de repérage"/>
                        </h:panelGroup>
                        <h:panelGroup id="spottingTextPanel">
                            <p:selectOneMenu id="seqSpottingText" 
                                             value="#{sequenceBean.spottingText}"
                                             onchange="submit()"
                                             valueChangeListener="#{sequenceBean.changeSystematisationTexts}">
                                <f:selectItems value="#{sequenceBean.spottingTexts}" />
                            </p:selectOneMenu>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel for="seqSpottingActivity" 
                                           value="Activité de repérage"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:selectOneMenu id="seqSpottingActivity" 
                                             value="#{sequenceBean.spottingActivity}"
                                             onchange="submit()"
                                             valueChangeListener="#{sequenceBean.changeSystematisationActivities}">
                                <f:selectItems value="#{sequenceBean.spottingActivities}" />
                            </p:selectOneMenu>
                        </h:panelGroup>
                        <h:panelGroup>
                            <div class="modal-header">
                                <h3>Support linguistique et didactique</h3>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup/>


                        <h:panelGroup>
                            <h:outputText 
                                value="Souhaitez-vous utiliser des supports 
                                linguistiques et/ou didactiques ? " />
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:selectBooleanButton id="seqSupport" 
                                                   value="#{sequenceBean.supports}" 
                                                   onLabel="Oui" offLabel="No" />
                        </h:panelGroup>


                        <h:panelGroup id="systematisationActivityPanel">
                            <div class="modal-header">
                                <h3>Activité de systématisation</h3>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup/>

                        <h:panelGroup>
                            <p:outputLabel for="seqSystematisationText" 
                                           value="Texte de systématisation"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:selectOneMenu id="seqSystematisationText" 
                                             value="#{sequenceBean.systematisationText}"
                                             onchange="submit()"
                                             valueChangeListener="#{sequenceBean.changeSpottingTexts}">
                                <f:selectItems 
                                    value="#{sequenceBean.systematisationTexts}" />
                            </p:selectOneMenu>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel for="seqSystematisationActivity" 
                                           value="Activité de systématisation"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:selectOneMenu id="seqSystematisationActivity" 
                                             value="#{sequenceBean.systematisationActivity}"
                                             onchange="submit()"
                                             valueChangeListener="#{sequenceBean.changeSpottingActivities}">
                                <f:selectItems value="#{sequenceBean.systematisationActivities}" />
                            </p:selectOneMenu>
                        </h:panelGroup>

                        <h:panelGroup id="applicationActivityPanel">
                            <div class="modal-header">
                                <h3>Activité d'application de connaissances</h3>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup/> 
                    </h:panelGrid>
                </h:panelGroup> 
                <h:panelGroup>
                    <p:inputTextarea id="seqKnowledgeApp" required="false" 
                                     value="#{sequenceBean.knowledgeApp}" 
                                     style="width: 100%"
                                     autoResize="false"
                                     maxlength="500"/>
                    <p:watermark for="seqKnowledgeApp" 
                                 value="Écrivez dans cette zone vos consignes de travail. (500 caractères)" />
                </h:panelGroup>
                <h:panelGroup>
                    <div class="form-actions">
                        <h:commandButton action="#{sequenceBean.validateSequence()}" 
                                         value="Validez votre séquence" 
                                         class="btn btn-danger"/>
                    </div>
                </h:panelGroup>
            </h:panelGrid>
            <!--@TODO: Change the button "support" if necessary or not cute ;)-->
            <!--@TODO: Add button go back if necessary -->
        </h:form>
    </ui:define>

</ui:composition>
