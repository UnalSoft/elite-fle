<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../WEB-INF/templates/default.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml">

    <ui:define name="title">
        Nouvelle Séquence : Validation
    </ui:define>

    <ui:define name="content">
        <!--form-no-margin-->

        <h:form id="newSequenceForm" class="form-horizontal">
            <h:panelGrid columns="1" cellpadding="5" style="table-layout:fixed;">
                <h:panelGroup> 
                    <div class="form-group" id="titleClass">
                        <div class="modal-header">
                            <h2>Vous souhaitez enregistrer cette séquence didactique ?</h2>
                        </div>
                    </div>
                </h:panelGroup> 
                <h:panelGroup> 
                    <h:panelGrid columns="2" cellpadding="5" width="100%" 
                                 style="table-layout:fixed;">
                        <h:panelGroup id="panelSeqName">
                            <p:outputLabel for="seqName" value="Nom" 
                                           style="font-weight:bold"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel id="seqName" 
                                           value="#{sequenceBean.name}" /> 
                        </h:panelGroup>
                        <h:panelGroup>
                            <div class="modal-header">
                                <h3>Activité de repérage</h3>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup/>
                        <h:panelGroup>
                            <p:outputLabel for="seqNotion" value="Notion" />
                        </h:panelGroup>
                        <h:panelGroup id="notionPanel">
                            <p:outputLabel id="seqNotion" 
                                           value="#{sequenceBean.notion.description}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel for="seqSubNotion" value="Sous-notion" />
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel id="seqSubNotion" 
                                           value="#{sequenceBean.subNotion.description}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel for="seqLevel" value="Niveau" />
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel  id="seqLevel" 
                                            value="#{sequenceBean.level.level}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel for="seqSpottingText" 
                                           value="Texte de repérage"/>
                        </h:panelGroup>
                        <h:panelGroup id="spottingTextPanel">
                            <p:outputLabel id="seqSpottingText" 
                                           value="#{sequenceBean.spottingText.text}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel for="seqSpottingActivity" 
                                           value="Activité de repérage"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel id="seqSpottingActivity" 
                                           value="#{sequenceBean.spottingActivity.activityName}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <div class="modal-header">
                                <h3>Support linguistique et didactique</h3>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup/>

                        <h:panelGroup>
                            <h:outputText 
                                value="Supports linguistiques et/ou didactiques " />
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel  id="seqSupport" value="#{sequenceBean.supports==true?'':'No'}"/>
                            <p:dataTable var="support" 
                                         value="#{supportBean.selectedSupports}"
                                         rendered="#{sequenceBean.supports}">
                                <p:column headerText="Titre">
                                    <h:outputText value="#{support.title}" />
                                </p:column>
                                <p:column headerText="Auteur">
                                    <h:outputText value="#{support.authorName}" />
                                </p:column>
                                <p:column headerText="Type">
                                    <h:outputText value="#{support.type}" />
                                </p:column>
                            </p:dataTable>
                        </h:panelGroup>
                        <h:panelGroup id="systematisationActivityPanel">
                            <div class="modal-header">
                                <h3>Activité de systématisation</h3>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup/>

                        <h:panelGroup>
                            <p:outputLabel for="seqSystematisationText" 
                                           value="Texte de systématisation"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel id="seqSystematisationText" 
                                           value="#{sequenceBean.systematisationText.text}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel for="seqSystematisationActivity" 
                                           value="Activité de systématisation"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel id="seqSystematisationActivity" 
                                           value="#{sequenceBean.systematisationActivity.activityName}"/>                                
                        </h:panelGroup>

                        <h:panelGroup/> 
                    </h:panelGrid>
                </h:panelGroup> 
                <h:panelGroup id="applicationActivityPanel">
                    <div class="modal-header">
                        <h3>Activité d'application de connaissances</h3>
                    </div>
                </h:panelGroup>
                <h:panelGroup>
                    <p:outputPanel id="seqKnowledgeApp" deferred="true"
                                   style="white-space: pre-line;
                                   word-break: break-all;">
                        #{sequenceBean.knowledgeApp}
                    </p:outputPanel>
                </h:panelGroup>
                <h:panelGroup id="explicationPanel">
                    <div class="modal-header">
                        <h3>Explication de la séquence</h3>
                    </div>
                </h:panelGroup>
                <h:panelGroup>
                    <p:outputPanel  id="seqExplication" deferred="true" 
                                    style="white-space: pre-line;
                                    word-break: break-all;">
                        #{sequenceBean.explication}
                    </p:outputPanel>
                </h:panelGroup>
                <h:panelGroup>
                    <div class="form-actions">
                        <h:button 
                            outcome="#{sequenceBean.supports==true?'support':'newSequence'}" 
                            value="Retourner" class="btn btn-danger" 
                            style="margin-right:5%"/>
                        <h:commandButton action="#{sequenceBean.validateSequence()}" 
                                         value="Validez votre séquence" 
                                         class="btn btn-danger"/>
                    </div>
                </h:panelGroup>
            </h:panelGrid>
        </h:form>     
    </ui:define>

</ui:composition>
